{% extends('PabloPeopleBundle::layout.html.twig') %}

{% block content %}
   <div class="page-header">
       <h2>Fiche Professeur</h2>
   </div>
    <div class="row">
        <div class="span6">
            <div class="well well-small">
                <h4>{{ person.firstname|title ~ ' ' ~ person.lastname|upper }}</h4>
                <p>
                    Nationalit&eacute;&nbsp;:&nbsp;<strong>{{ (person.nationality) ? person.nationality.name }}</strong><br>
                    Sexe&nbsp;:&nbsp;<strong>{{ (person.sex =='F') ? 'FÃ©minin' : 'Masculin' }}</strong><br>
                    Date de naissance&nbsp;:&nbsp;<strong>{{ (person.dateofbirth) ? person.dateofbirth|date('d/m/Y') }}</strong><br>
                    Lieu de naissance&nbsp;:&nbsp;<strong>{{ person.placeofbirth }}</strong><br>
                    Matricule : <strong>{{ person.matricule }}</strong>
                </p>
                <div class="text-right">
                    <a class="btn btn-mini" href="{{ path('pablo_teacher_edit', {'id': person.id}) }}"><i class="icon-pencil"></i></a>
                </div>
            </div>
        </div>
        <div class="span6">
            {% for message in app.session.flashbag.get('notice') %}
                <div class="alert {{ (message.type) ? 'alert-' ~ message.type }}">
                    {{ message.content }}
                </div>
            {% endfor %}
        </div>
    </div>
    <br>
    <div class="row">
        <div class="span12">
            <ul class="nav nav-tabs">
                <li><a href="#addresses" data-toggle="tab">Adresses</a></li>
                <li><a href="#phones" data-toggle="tab">T&eacute;l&eacute;phones</a></li>
                <li><a href="#emails" data-toggle="tab">Emails</a></li>
                {#<li><a href="#minerval" data-toggle="tab">Minerval</a></li>#}
                {#<li><a href="#paiements" data-toggle="tab">Paiements</a></li>#}
                {#<li><a href="#registrations" data-toggle="tab">Inscriptions</a></li>#}
                {#<li><a href="#historic" data-toggle="tab">Historique</a></li>#}
                <li><a href="#comments" data-toggle="tab">Commentaires&nbsp;<span class="badge badge-info">{{ (person.comments|length > 0) ? person.comments|length}}</span></a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane" id="addresses">
                    <div class="row">
                        {% include('PabloPeopleBundle:Address:_addresses.html.twig') %}
                    </div>
                </div>
                <div class="tab-pane" id="phones">
                    <div class="row">
                        {% include('PabloPeopleBundle:Phone:_phones.html.twig') %}
                    </div>
                </div>
                <div class="tab-pane" id="emails">
                    <div class="row">
                        {% include('PabloPeopleBundle:Email:_emails.html.twig') %}
                    </div>
                </div>
                {#<div class="tab-pane" id="minerval">#}
                    {#<h4>Minerval</h4>#}
                {#</div>#}
                {#<div class="tab-pane" id="paiements">#}
                    {#<h4>Paiements</h4>#}
                {#</div>#}
                {#<div class="tab-pane" id="registrations">#}
                    {#<h4>Inscriptions</h4>#}
                {#</div>#}
                {#<div class="tab-pane" id="historic">#}
                    {#<h4>Historique</h4>#}
                {#</div>#}
                <div class="tab-pane" id="comments">
                    <div class="row">
                        {% include('PabloPeopleBundle:Comment:_comments.html.twig') %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% include('PabloPeopleBundle::_modal.html.twig') %}
{% endblock content %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function() {
            if ($(location).attr('hash')) {
                $('.nav-tabs a[href="' + $(location).attr('hash') + '"]').tab('show');
            } else {
                $('.nav-tabs a[href="#addresses"]').tab('show');
            }

            $('a.btn-danger').click(function(event) {
                event.preventDefault();

                $('.modal').modal('show');

                url = $(this).attr('href');
                console.log(url);
                $('div.modal-footer button.btn-primary').click(function() {
                    $(location).attr('href', url);
                })
            });
        })
    </script>
{% endblock javascripts %}